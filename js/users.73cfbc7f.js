(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["users"],{"9d01":function(e,t,a){},b73d:function(e,t,a){"use strict";var s=a("15fd"),i=a("5530"),r=(a("0481"),a("4069"),a("ec29"),a("9d01"),a("fe09")),l=a("c37a"),n=a("c3f0"),o=a("0789"),d=a("490a"),c=a("80d2"),u=["title"];t["a"]=r["a"].extend({name:"v-switch",directives:{Touch:n["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},l["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var e=this.attrs$,t=(e.title,Object(s["a"])(e,u));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(i["a"])(Object(i["a"])({},this.attrs),t)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(o["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(d["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(e){(e.keyCode===c["z"].left&&this.isActive||e.keyCode===c["z"].right&&!this.isActive)&&this.onChange()}}})},ed81:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"px-5",attrs:{fluid:""}},[a("v-row",{staticClass:"mb-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"4",xl:"2","align-self":"end"}},["Admin"==e.userRole?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mr-1",attrs:{icon:"",color:"blue darken-3 white--text",large:""},on:{click:e.showAddModal}},"v-btn",i,!1),s),[a("v-icon",[e._v("mdi-plus")])],1)]}}],null,!1,2690786653)},[a("span",[e._v("Add User")])]):e._e(),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mr-1",attrs:{icon:"",color:"secondary"},on:{click:e.handleFilter}},"v-btn",i,!1),s),[a("v-icon",[e._v("mdi-cached")])],1)]}}])},[a("span",[e._v("Refresh Users")])])],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4",xl:"3"}},[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"auto",disabled:e.isLoading,clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.records,"item-key":"id",search:e.search,loading:e.isLoading,"loading-text":"Loading... Please wait","sort-by":e.sortBy,"sort-desc":e.sortDesc},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u(["Admin"==e.userRole?{key:"item.actions",fn:function(t){var s=t.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",small:""},on:{click:function(t){return e.viewInfo(s)}}},"v-btn",r,!1),i),[a("v-icon",{attrs:{size:"large",color:"blue darken-3"}},[e._v(" mdi-note-edit-outline ")])],1)]}}],null,!0)},[a("span",[e._v("View / Update")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",small:""},on:{click:function(t){return e.resetPassword(s)}}},"v-btn",r,!1),i),[a("v-icon",{attrs:{size:"large",color:"blue darken-3"}},[e._v(" mdi-lock-reset ")])],1)]}}],null,!0)},[a("span",[e._v("Reset Password")])])]}}:null,{key:"item.is_active",fn:function(t){var s=t.item;return[a("v-chip",{attrs:{color:"Active"==s.is_active?"success":"red",dark:"",small:"",label:""}},["Active"==s.is_active?a("v-icon",{attrs:{left:"",size:"medium"}},[e._v(" mdi-check ")]):a("v-icon",{attrs:{left:"",size:"medium"}},[e._v(" mdi-close ")]),e._v(" "+e._s(s.is_active)+" ")],1)]}}],null,!0)}),e.viewInfoModal?a("ViewInfoModal",{attrs:{modalData:e.viewInfoModalData},on:{closeModal:function(t){e.viewInfoModal=!1},refresh:e.handleFilter}}):e._e(),e.resetPassModal?a("ResetPassModal",{attrs:{modalData:e.resetPassModalData},on:{closeModal:function(t){e.resetPassModal=!1}}}):e._e(),e.addModal?a("AddModal",{attrs:{modalData:e.addModalData},on:{closeModal:function(t){e.addModal=!1},refresh:e.handleFilter}}):e._e()],1)},i=[],r=a("5530"),l=a("2f62"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"1000"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h6"},[e._v("Add User")])]),a("v-divider"),a("v-card-text",{staticClass:"pt-3 pb-6"},[a("v-alert",{staticClass:"mb-3",attrs:{value:!!e.addError,dense:"",outlined:"",type:"error",transition:"scale-transition",icon:"mdi-exclamation-thick"}},[e._v(" "+e._s(e.addError)+" ")]),a("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("div",{staticClass:"mb-2"},[a("small",[e._v("* indicates required field")])]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{ref:"surname",attrs:{rules:[e.rules.required,e.rules.minimum],label:"Surname*",counter:"30",maxlength:"30","hide-details":"auto"},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{ref:"given_name",attrs:{rules:[e.rules.required,e.rules.minimum],label:"Given Name*",counter:"30",maxlength:"30","hide-details":"auto"},model:{value:e.given_name,callback:function(t){e.given_name=t},expression:"given_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{ref:"middle_name",attrs:{rules:[e.rules.maximumOptional],label:"Middle Name*",counter:"30",maxlength:"30","hide-details":"auto"},model:{value:e.middle_name,callback:function(t){e.middle_name=t},expression:"middle_name"}})],1),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-text-field",{ref:"email",attrs:{rules:[e.rules.required,e.rules.validEmail,e.emailExist],label:"Email*","hide-details":"auto",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),a("div",{staticClass:"mt-5"},[a("v-btn",{staticClass:"mr-2 mt-2",attrs:{disabled:!e.valid,type:"submit",color:"blue darken-3 white--text",loading:e.addLoading,depressed:""}},[e._v(" Add ")]),a("v-btn",{staticClass:"mt-2",attrs:{color:"secondary",depressed:"",outlined:""},on:{click:e.closeModal}},[e._v(" Cancel ")])],1)],1)],1)],1)],1)},o=[],d=a("1da1"),c=(a("96cf"),a("ac1f"),a("00b4"),a("4211")),u={props:{modalData:{type:Object,required:!0}},data:function(){return{valid:!0,rules:{required:function(e){return!!e||"This field is required."},minimum:function(e){return e&&e.length>=2&&e&&e.length<=30||"Minimum 2 - 30 characters."},maximumOptional:function(e){return!e||(e.length<=30||"Maximum 30 characters.")},validEmail:function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}},surname:"",given_name:"",middle_name:"",email:"",emailExistText:""}},computed:Object(r["a"])(Object(r["a"])({},Object(l["d"])("users",["addLoading","addError","addErrors"])),{},{dialog:{get:function(){return this.modalData.dialog},set:function(){this.closeModal()}}}),mounted:function(){this.$refs.surname.focus()},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])("users",["addRecord"])),{},{emailExist:function(e){return e!=this.emailExistText||'"'.concat(e,'" already exist')},handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.addLoading){t.next=4;break}return t.next=3,e.addRecord({surname:e.surname,given_name:e.given_name,middle_name:e.middle_name,email:e.email});case 3:!e.addError&&Object(c["b"])(e.addErrors)?(e.$refs.form.reset(),e.$emit("refresh"),e.closeModal()):Object(c["b"])(e.addErrors)?e.$refs.form.resetValidation():(e.emailExistText=e.email,e.$refs["email"].focus(),e.$refs.form.validate());case 4:case"end":return t.stop()}}),t)})))()},closeModal:function(){this.$emit("closeModal")}})},m=u,v=a("2877"),h=a("6544"),f=a.n(h),b=a("0798"),p=a("8336"),g=a("b0af"),x=a("99d9"),_=a("62ad"),w=a("169a"),C=a("ce7e"),k=a("4bd4"),M=a("0fd9"),O=a("8654"),j=Object(v["a"])(m,n,o,!1,null,null,null),D=j.exports;f()(j,{VAlert:b["a"],VBtn:p["a"],VCard:g["a"],VCardText:x["c"],VCardTitle:x["d"],VCol:_["a"],VDialog:w["a"],VDivider:C["a"],VForm:k["a"],VRow:M["a"],VTextField:O["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"1000px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h6"},[e._v("Update User")])]),a("v-divider"),a("v-card-text",{staticClass:"pt-3 pb-6"},[a("v-alert",{staticClass:"mb-3",attrs:{value:!!e.updateError,dense:"",outlined:"",type:"error",transition:"scale-transition",icon:"mdi-exclamation-thick"}},[e._v(" "+e._s(e.updateError)+" ")]),a("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("div",{staticClass:"mb-2"},[a("small",[e._v("* indicates required field")])]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{ref:"surname",attrs:{rules:[e.rules.required,e.rules.minimum],label:"Surname*",counter:"30",maxlength:"30","hide-details":"auto"},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{ref:"given_name",attrs:{rules:[e.rules.required,e.rules.minimum],label:"Given Name*",counter:"30",maxlength:"30","hide-details":"auto"},model:{value:e.given_name,callback:function(t){e.given_name=t},expression:"given_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{ref:"middle_name",attrs:{rules:[e.rules.maximumOptional],label:"Middle Name*",counter:"30",maxlength:"30","hide-details":"auto"},model:{value:e.middle_name,callback:function(t){e.middle_name=t},expression:"middle_name"}})],1),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-text-field",{ref:"email",attrs:{rules:[e.rules.required,e.rules.validEmail,e.emailExist],label:"Email*","hide-details":"auto",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),a("div",{staticClass:"mt-6"},[a("v-switch",{attrs:{label:"Status: "+e.statusText},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),a("div",[a("v-btn",{staticClass:"mr-2 mt-2",attrs:{disabled:!e.valid,type:"submit",color:"blue darken-3 white--text",loading:e.updateLoading,depressed:""}},[e._v(" Save ")]),a("v-btn",{staticClass:"mt-2",attrs:{color:"secondary",depressed:"",outlined:""},on:{click:e.closeModal}},[e._v(" Cancel ")])],1)],1)],1)],1)],1)},V=[],y={props:{modalData:{type:Object,required:!0}},data:function(){return{valid:!0,rules:{required:function(e){return!!e||"This field is required."},minimum:function(e){return e&&e.length>=2&&e&&e.length<=30||"Minimum 2 - 30 characters."},maximumOptional:function(e){return!e||(e.length<=30||"Maximum 30 characters.")},validEmail:function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}},surname:"",given_name:"",middle_name:"",email:"",emailExistText:"",status:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(l["d"])("users",["updateLoading","updateError","updateErrors"])),{},{dialog:{get:function(){return this.modalData.dialog},set:function(){this.closeModal()}},statusText:function(){return this.status?"Active":"Inactive"}}),mounted:function(){this.$refs.surname.focus(),this.surname=this.modalData.last_name,this.given_name=this.modalData.first_name,this.middle_name=this.modalData.middle_name,this.email=this.modalData.email,this.status="Active"==this.modalData.is_active},beforeDestroy:function(){this.$store.commit("users/setUpdateError",null)},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])("users",["updateRecord"])),{},{emailExist:function(e){return e!=this.emailExistText||'"'.concat(e,'" already exist')},handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateLoading){t.next=4;break}return t.next=3,e.updateRecord({id:e.modalData.id,surname:e.surname,given_name:e.given_name,middle_name:e.middle_name,email:e.email,status:e.status});case 3:!e.updateError&&Object(c["b"])(e.updateErrors)?(e.$emit("refresh"),e.closeModal()):Object(c["b"])(e.updateErrors)?e.$refs.form.resetValidation():(e.emailExistText=e.email,e.$refs["email"].focus(),e.$refs.form.validate());case 4:case"end":return t.stop()}}),t)})))()},closeModal:function(){this.$emit("closeModal")}})},R=y,S=a("b73d"),$=Object(v["a"])(R,E,V,!1,null,null,null),P=$.exports;f()($,{VAlert:b["a"],VBtn:p["a"],VCard:g["a"],VCardText:x["c"],VCardTitle:x["d"],VCol:_["a"],VDialog:w["a"],VDivider:C["a"],VForm:k["a"],VRow:M["a"],VSwitch:S["a"],VTextField:O["a"]});var A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h6"},[e._v("Reset Password")])]),a("v-divider"),a("v-card-text",{staticClass:"pt-3 pb-6"},[a("v-alert",{staticClass:"mb-3",attrs:{value:!!e.resetPassError,dense:"",outlined:"",type:"error",transition:"scale-transition",icon:"mdi-exclamation-thick"}},[e._v(" "+e._s(e.resetPassError)+" ")]),a("p",{staticClass:"text-subtitle-1"},[e._v("An email with new password will be sent to "+e._s(e.modalData.email)+".")]),a("p",{staticClass:"text-subtitle-1"},[e._v("Are you sure you want to reset the password of "+e._s(e.modalData.name)+"?")]),a("v-btn",{staticClass:"mr-2 mt-2",attrs:{disabled:e.resetPassLoading,type:"submit",color:"blue darken-3 white--text",loading:e.resetPassLoading,depressed:""},on:{click:e.handleClick}},[e._v(" Reset ")]),a("v-btn",{staticClass:"mt-2",attrs:{color:"secondary",depressed:"",outlined:""},on:{click:e.closeModal}},[e._v(" Cancel ")])],1)],1)],1)},T=[],L={props:{modalData:{type:Object,required:!0}},computed:Object(r["a"])(Object(r["a"])({},Object(l["d"])("users",["resetPassLoading","resetPassError"])),{},{dialog:{get:function(){return this.modalData.dialog},set:function(){this.closeModal()}}}),beforeDestroy:function(){this.$store.commit("users/setResetPassError",null)},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])("users",["resetPassword"])),{},{handleClick:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.resetPassLoading){t.next=4;break}return t.next=3,e.resetPassword({id:e.modalData.id,email:e.modalData.email});case 3:e.resetPassError||(e.$emit("refresh"),e.closeModal());case 4:case"end":return t.stop()}}),t)})))()},closeModal:function(){this.$emit("closeModal")}})},q=L,I=Object(v["a"])(q,A,T,!1,null,null,null),B=I.exports;f()(I,{VAlert:b["a"],VBtn:p["a"],VCard:g["a"],VCardText:x["c"],VCardTitle:x["d"],VDialog:w["a"],VDivider:C["a"]});var F={components:{AddModal:D,ViewInfoModal:P,ResetPassModal:B},data:function(){return{search:"",sortBy:"created_at",sortDesc:!0,headers:[{text:"Status",value:"is_active"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Role",value:"role"},{text:"Created At",value:"created_at"},{text:"Updated At",value:"updated_at"}],viewInfoModal:!1,viewInfoModalData:[],resetPassModal:!1,resetPassModalData:[],addModal:!1,addModalData:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(l["c"])(["userRole"])),Object(l["d"])("users",["records","isLoading"])),created:function(){this.handleFilter(),"Admin"==this.userRole&&this.headers.unshift({text:"Actions",value:"actions",sortable:!1,align:"center"})},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])("users",["getRecords"])),{},{handleFilter:function(){this.isLoading||(this.$store.commit("users/setRecords",[]),this.getRecords())},viewInfo:function(e){this.viewInfoModal=!0,this.viewInfoModalData=Object(r["a"])(Object(r["a"])({},e),{},{dialog:this.viewInfoModal})},resetPassword:function(e){this.resetPassModal=!0,this.resetPassModalData=Object(r["a"])(Object(r["a"])({},e),{},{dialog:this.resetPassModal})},showAddModal:function(){this.addModal=!0,this.addModalData={dialog:this.addModal}}})},U=F,z=a("cc20"),N=a("a523"),G=a("8fea"),J=a("132d"),K=a("3a2f"),H=Object(v["a"])(U,s,i,!1,null,null,null);t["default"]=H.exports;f()(H,{VBtn:p["a"],VChip:z["a"],VCol:_["a"],VContainer:N["a"],VDataTable:G["a"],VIcon:J["a"],VRow:M["a"],VTextField:O["a"],VTooltip:K["a"]})}}]);
//# sourceMappingURL=users.73cfbc7f.js.map